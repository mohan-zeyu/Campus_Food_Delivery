# 微信小程序大作业开题报告

## 一、项目基本信息
- **小程序名称**：校园食递（CampusEats）
- **小组编号**：第一组
- **项目类型**：生活服务 / 电商类（校园外卖与跑腿配送）

### 1. 团队成员及分工
- **组长：刘泽宇**
  - 后端开发（云函数 / API）
  - 数据库设计与权限规则
  - 功能测试与性能优化（含日志与异常处理）
- **组员：杨启航**
  - 需求分析与总体方案设计
  - 前端页面开发与界面美化（含组件抽象、交互体验）
  - 文档整理与答辩 PPT 制作

## 二、项目背景与研究意义

### 1. 项目背景
校园场景下，学生在高峰时段（午晚餐、考试周）常面临以下痛点：
- **排队成本高**：食堂窗口排队时间长，影响上课/自习节奏。
- **信息不透明**：哪些窗口正在出餐快/慢、哪些菜品已售罄、是否支持打包等信息难以提前获知。
- **跨区不便**：宿舍区与食堂区距离远或天气恶劣时取餐体验差。
- **校内配送生态分散**：可能存在零散“代取餐”群聊，但缺少统一的下单、计费、评价与风控机制。

因此，开发一款“**校内轻量外卖配送平台**”小程序，聚焦“食堂/校园商户 + 学生配送员”的闭环，可以显著提升校园生活效率。

### 2. 研究意义
- **提升效率**：减少排队与往返时间，提升取餐与送餐效率。
- **促进规范化**：将零散代取整合为可追踪订单流程（下单-接单-配送-评价）。
- **增强体验**：提供更清晰的商品信息、取餐点定位、配送进度与消息提醒。
- **具备可扩展性**：后续可扩展到“超市/打印/快递代取”等校园跑腿场景。

## 三、功能需求分析

### 1. 核心功能模块

#### （1）用户注册与登录
- 微信授权登录（获取 openid）
- 用户信息管理：昵称/头像、手机号（可选）、常用地址（宿舍/教学楼）
- 账号状态：正常 / 黑名单（用于风控）

#### （2）商户与商品浏览（面向普通用户）
- 商户列表：食堂楼层/窗口、营业时间、配送范围、评分
- 商品列表：分类（主食/饮品/小吃）、价格、库存/售罄、打包费（可选）
- 搜索与筛选：按关键字、价格区间、评分、距离（简化为校区/片区）

#### （3）下单与支付（可先做“模拟支付”）
- 购物车：加减数量、备注（少辣/不放香菜）
- 订单创建：地址选择、送达时间（立即/预约）、配送费计算
- 支付方式：
  - **阶段 1（必做）**：模拟支付（按钮确认 + 订单状态变更）
  - **阶段 2（选做）**：接入微信支付（若课程允许且具备资质）

#### （4）订单履约与配送（面向配送员）
- 配送员注册/认证（简化：申请成为配送员）
- 抢单/接单大厅：展示待配送订单（取餐点、距离、酬劳）
- 配送流程：到店取餐 → 出发配送 → 送达确认
- 送达凭证：拍照上传/取餐码（选做）

#### （5）订单管理与评价体系
- 订单状态流转（建议）：
  - 已下单 → 已支付/待接单 → 已接单/待取餐 → 配送中 → 已送达 → 已完成/已评价 → 已取消
- 用户端：订单列表、订单详情、取消（超时限制）、催单（消息提醒）
- 评价：对商户与配送员分别评分（1-5）+ 文字评价 + 可选图片

### 2. 辅助功能模块
- 消息通知：接单通知、状态变更通知（订阅消息或站内通知）
- 个人中心：地址管理、优惠券（选做）、投诉与反馈
- 数据展示（加分项）：
  - 用户：本周消费/订单统计
  - 配送员：接单数、准时率、收入统计

### 3. 后台管理
- 管理员登录（预置账号或角色标记）
- 商户管理：新增/下架商户、商品上架/库存调整
- 订单管理：查看订单、处理异常、封禁账号
- 数据统计：高峰时段、热门窗口、取消率

## 四、用户角色与权限

| 用户角色 | 功能权限 |
|---|---|
| 普通用户 | 浏览商户/商品、下单、取消订单（规则内）、评价、投诉、地址管理 |
| 配送员 | 查看待接单、接单/改派（可选）、更新配送状态、查看收入与记录 |
| 商户（可选） | 管理商品与库存、查看订单、出餐确认（简化可由管理员代替） |
| 管理员 | 商户/商品管理、订单与用户管理、公告与数据统计 |

> 课程时间有限：商户端可选择“管理员代运营”方案，即不做商户独立登录，只提供管理员管理界面。

## 五、系统设计概要

### 1. 页面结构
- 首页：推荐商户、搜索框、活动公告
- 商户页：商户信息 + 商品分类列表
- 商品详情：规格/备注（简化）
- 购物车：结算、配送费与备注
- 下单页：地址、时间、备注、支付
- 订单页：订单列表、订单详情、状态追踪
- 配送员大厅：待接单列表、接单详情、状态更新
- 个人中心：信息、地址、成为配送员入口、统计
- 管理后台（简版）：商户/商品/订单管理

### 2. 数据库设计
- `users`：用户信息、角色、信誉分
- `merchants`：商户信息、营业时间、配送范围
- `products`：商品信息、库存、价格、图片
- `orders`：订单主表（用户、地址、金额、状态、配送员、时间戳）
- `order_items`：订单明细（商品、数量、备注）
- `deliveries`：配送记录（接单时间、取餐时间、送达时间、定位点可选）
- `reviews`：评价（对象类型：商户/配送员，评分、内容、图片）
- `notices`：公告（管理员发布）

### 3. 关键流程（简述）
1. 用户选商户与商品 → 加入购物车 → 填写地址与备注 → 下单（模拟支付）
2. 订单进入“待接单” → 配送员抢单 → 到店取餐 → 配送中 → 送达确认
3. 用户确认收货 → 评价 → 订单完成

### 4. 安全与风控（简版）
- 订单取消规则：接单后限制取消或需审批（可选）
- 黑名单与举报：多次恶意取消/差评异常可降低信誉分
- 数据权限：按角色限制读写（用户只能访问自己的订单）

## 六、项目进度安排

| 时间节点 | 任务内容 | 负责人 |
|---|---|---|
| 第1周 | 需求分析、选题确定、原型草图 | 全组 |
| 第2-3周 | UI 设计、数据库设计、云开发环境搭建 | 杨启航（UI）/刘泽宇（DB&云函数） |
| 第4-5周 | 核心功能开发：登录、商户/商品、下单、订单状态流转 | 全组 |
| 第6周 | 配送员模块、后台管理简版、联调与异常处理 | 全组（刘泽宇主导后端） |
| 第7周 | 功能测试、体验优化、性能与安全规则完善 | 全组（交叉互测） |
| 第8周 | 文档撰写、答辩 PPT、项目演示彩排 | 刘泽宇主导（PPT）/全组 |

## 八、创新点与可扩展方向
- **校内场景化配送费**：按校区/片区阶梯定价，简单可实现、展示效果好
- **高峰期提示**：根据历史订单统计生成“繁忙指数”（可视化）
- **订阅消息提醒**：关键状态变更通知用户与配送员
- 可扩展：超市代购、快递代取、打印跑腿等统一跑腿平台

#### AI结合

##### 1) 智能“搜索 + 菜品推荐”

- 用户输入：`“辣一点、不要香菜、便宜点、热量低”`
- AI 输出：匹配菜品列表 + 推荐理由（可同时做筛选）
- 实现方式：
  - 先用你们的商品表做结构化过滤（价格/分类/是否辣等标签），
  - AI 负责把自然语言转成“筛选条件 + 排序偏好”（类似意图识别）
- 优点：UI 演示效果很好，属于“创新点”，同时很安全。

##### 2) 自动生成“备注/口味偏好”

- 场景：用户每次都要写备注很烦（少辣、不要葱、饭少一点）
- AI：根据用户历史订单，自动给出一条建议备注，一键应用
- 成本：很低（甚至不需要大模型也能用规则+少量AI）

##### 3) 评价内容智能辅助（不是刷好评）

- 用户点“完成评价”时，AI 给一个“评价模板草稿”，用户可编辑再发
- 注意：明确提示“可修改/可删”，避免“虚假评价”感觉
- 价值：提升评价率，也好演示

## 九、风险分析与应对
- **支付与资质限制**：优先实现模拟支付，确保闭环可演示；有条件再接入真实支付。
- **时间不足导致功能堆叠**：先做“用户端下单 + 配送员接单 + 订单状态”三件套，再做评价与后台。
- **数据权限与安全**：采用云开发权限规则，按 `openid` 与 `role` 控制读写。
