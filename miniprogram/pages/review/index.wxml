<!--pages/review/index.wxml-->
<view class="review-page">
  <view class="review-card card">
    <view class="review-label text-bold mb-16">总体评分</view>
    <view class="stars-row row">
      <view wx:for="{{stars}}" wx:key="*this"
        class="star {{score >= item ? 'filled' : ''}}"
        data-score="{{item}}" bindtap="onStarTap">★</view>
    </view>
  </view>

  <view class="review-card card">
    <view class="review-label text-bold mb-16">评价内容</view>
    <textarea class="review-textarea"
      placeholder="分享你的用餐体验..."
      value="{{content}}"
      bindinput="onContentInput"
      maxlength="500"/>
    <view class="ai-btn row" bindtap="onAiDraft">
      <view class="ai-icon">✨</view>
      <view class="ai-text text-primary text-sm">{{aiLoading ? 'AI生成中...' : 'AI帮我写'}}</view>
    </view>
  </view>

  <view class="review-card card image-section">
    <view class="review-label text-bold mb-16">添加图片（可选）</view>
    <view class="image-grid">
      <view class="image-item" wx:for="{{images}}" wx:key="*this">
        <image class="image-thumb" src="{{item}}" mode="aspectFill"/>
        <view class="image-delete" data-index="{{index}}" catchtap="onRemoveImage">×</view>
      </view>
      <view class="image-item image-add" wx:if="{{images.length < 3}}" bindtap="onChooseImage">
        <view class="image-add-icon">+</view>
      </view>
    </view>
  </view>

  <view class="submit-wrap">
    <button class="submit-btn btn-primary" loading="{{submitting}}" bindtap="onSubmit">提交评价</button>
  </view>
</view>
