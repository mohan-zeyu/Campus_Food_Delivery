<!--pages/merchant-products/index.wxml-->
<view class="products-page">
  <view wx:if="{{loading}}" class="loading-wrap">åŠ è½½ä¸­...</view>
  <view wx:elif="{{products.length === 0}}" class="empty-state">
    <view style="font-size:80rpx">ğŸ½ï¸</view>
    <view class="text-secondary mt-16">è¿˜æ²¡æœ‰å•†å“ï¼Œå¿«å»æ·»åŠ å§</view>
  </view>
  <view wx:else>
    <view class="product-item card row" wx:for="{{products}}" wx:key="_id">
      <image class="prod-img" src="{{item.images[0]}}" mode="aspectFill"/>
      <view class="prod-info flex-1">
        <view class="prod-name text-bold">{{item.name}}</view>
        <view class="prod-price price mt-8">Â¥{{item.price/100}}</view>
        <view class="prod-cat text-secondary text-sm">{{item.category}}</view>
      </view>
      <view class="prod-actions col">
        <view class="edit-btn text-primary text-sm" catchtap="onEditProduct" data-id="{{item._id}}">ç¼–è¾‘</view>
        <view class="toggle-btn text-sm mt-8 {{item.is_available ? 'text-success' : 'text-secondary'}}"
          catchtap="onToggleAvailable" data-id="{{item._id}}">
          {{item.is_available ? 'ä¸Šæ¶' : 'ä¸‹æ¶'}}
        </view>
      </view>
    </view>
  </view>
  <view class="add-btn-wrap">
    <view class="add-btn" bindtap="onAddProduct">+ æ–°å¢å•†å“</view>
  </view>
</view>
