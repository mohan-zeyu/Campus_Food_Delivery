<!--pages/order-list/index.wxml-->
<view class="orders-page">
  <scroll-view class="tab-bar" scroll-x>
    <view wx:for="{{tabs}}" wx:key="key"
      class="tab-item {{activeTab === item.key ? 'active' : ''}}"
      data-key="{{item.key}}" bindtap="onTabChange">
      {{item.label}}
      <view wx:if="{{activeTab === item.key}}" class="tab-underline"></view>
    </view>
  </scroll-view>

  <view wx:if="{{loading && orders.length === 0}}" class="loading-wrap">åŠ è½½ä¸­...</view>

  <view wx:elif="{{!loading && orders.length === 0}}" class="empty-state">
    <view class="empty-emoji">ğŸ“‹</view>
    <view class="empty-text">æš‚æ— è®¢å•</view>
  </view>

  <view wx:else class="orders-list">
    <view class="order-card" wx:for="{{orders}}" wx:key="_id"
      bindtap="onOrderTap" data-id="{{item._id}}">

      <view class="order-head">
        <view class="order-no">è®¢å•å·: {{item.order_no}}</view>
        <view class="status-text status-{{item.status}}">{{item.statusLabel}}</view>
      </view>

      <view class="order-foot">
        <view class="item-count">å…± {{item.itemCount}} é¡¹å•†å“</view>
        <view class="total-wrap">
          <text class="total-label">å®ä»˜</text>
          <text class="total-price">Â¥{{item.total_amount/100}}</text>
        </view>
      </view>
    </view>

    <view wx:if="{{!hasMore}}" class="no-more">æ²¡æœ‰æ›´å¤šäº†</view>
    <view wx:if="{{loading}}" class="loading-wrap">åŠ è½½ä¸­...</view>
  </view>

</view>
