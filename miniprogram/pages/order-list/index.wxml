<!--pages/order-list/index.wxml-->
<view class="order-list-page">
  <!-- æ ‡ç­¾æ  -->
  <scroll-view class="tab-bar" scroll-x>
    <view wx:for="{{tabs}}" wx:key="key"
      class="tab-item {{activeTab === item.key ? 'active' : ''}}"
      data-key="{{item.key}}" bindtap="onTabChange">
      {{item.label}}
    </view>
  </scroll-view>

  <!-- è®¢å•åˆ—è¡¨ -->
  <view wx:if="{{loading && orders.length === 0}}" class="loading-wrap">åŠ è½½ä¸­...</view>
  <view wx:elif="{{!loading && orders.length === 0}}" class="empty-state">
    <view style="font-size:80rpx">ğŸ“‹</view>
    <view class="text-secondary mt-16">æš‚æ— è®¢å•</view>
  </view>
  <view wx:else>
    <view class="order-card card" wx:for="{{orders}}" wx:key="_id"
      bindtap="onOrderTap" data-id="{{item._id}}">
      <view class="order-head row-between">
        <view class="merchant-name text-bold">{{item.merchant_name}}</view>
        <view class="status-text text-sm text-primary">{{item.statusLabel}}</view>
      </view>
      <view class="order-no text-secondary text-xs mt-8">{{item.order_no}}</view>
      <view class="order-foot row-between mt-16">
        <view class="text-secondary text-sm">å…±{{item.items_total}}é¡¹å•†å“</view>
        <view class="total">å®ä»˜ <text class="price">Â¥{{item.total_amount/100}}</text></view>
      </view>
    </view>
    <view wx:if="{{!hasMore}}" class="no-more">æ²¡æœ‰æ›´å¤šäº†</view>
    <view wx:if="{{loading}}" class="loading-wrap">åŠ è½½ä¸­...</view>
  </view>
</view>
